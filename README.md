[![Builder Travis](https://img.shields.io/travis/weber-gregoire/docker-minecraft.svg)][0]
Map builder: [![Builder Docker Pulls](https://img.shields.io/docker/pulls/gregoireweber/minecraft-map-builder.svg)][1]
Map viewer:  [![Viewer Docker Pulls](https://img.shields.io/docker/pulls/gregoireweber/minecraft-map-viewer.svg)][2]

# Minecraft Overviewer Docker Images

Docker Images to Run [Minecraft Overviewer][3]. Overviewer is a render that produces a [Leaflet][4] render of a [Minecraft][5] world.

# Tags and versions

## Map builder

Tags for map builder from `1` to `7` is compatible with minecraft 1.12
When support for 1.13 was added, image versionning was updated to include overviewer version number as follows
```bash
gregoireweber/minecraft-map-builder:{OVERVIEWER_RELEASE_VERSION}
gregoireweber/minecraft-map-builder:{OVERVIEWER_RELEASE_VERSION}-{TRAVIS_BUILD_NUMBER}
```

## Map viewer

Map viewver is a simple http server, no specific version is necessary as long as the volume is shared with the builder container

# How it works

There are two different images to use :
* minecraft-map-builder
* minecraft-map-viewer

The `minecraft-map-builder` has [Minecraft Overviewer][3] installed on it, and read your minecraft server folder to generate all the file to create your online map.
The `minecraft-map-viewer` is a simple python web server that serves the content generated by the map buider. That way, you can scale your http server without having to handle multiple builders.

To use it, check the `docker-compose-example.yml` file in the repo, and create folders like this :

```
<ROOT_FOLDER>
 |
 |- docker-compose-example.yml
 |
 |- server-data/
 |   \_ folder that contains all the files generated by your minecraft server (map, config and players data)
 |
 \- render-data/
     \_ folder that contains the file of the map generated by minecraft-map-builder
```

Simply run `docker-compose -f docker-compose-example.yml up -d` the minecraft server will start, and the builder will generate the map when it will be created by the server (you need to log on the minecraft server at least once since the map is generated when you play).
From the a cron job s running in the `minecraft-map-builder`, updating the map every hour, and the POIs every 5 minutes.
Since there is two different container for overviewer, your map will always be available, event when the builder is generating the map.

# Usefull things to know

In game, you can place a sign, by default it will not be rendered on the map.
But, if you type `-- RENDER --` on the last line of the Sign, it will be flagged and the text of the first to third line will be shown on the map.

# Configuration

Two environment variables are available to configure the cronjob that generate map data.
You can either configure it via the `-e` option of the docker run command, or by specifiying the value in a docker-compose file (see `docker-compose-example.yml`).

## Map Generation

You can use the environment vairable `MAP_GENERATION_FREQUENCY` to configure the frenquency at which the map generation is triggered by the cron job.
You must use a valid cron expression, you can use [this tool to do so][6]
Default value is `0 * * * *` (every hour at minute 0).

## POI Generation

You can use the environment vairable `POI_REFRESH_FREQUENCY` to configure the frenquency at which the POI refresh script is triggered by the cron job.
You must use a valid cron expression, you can use [this tool to do so][6]
Default value is `*/5 * * * *` (every five minutes).


# Advanced configuration

You can override the config file to have a different map, or different informations displayed.
The documentation regarding the syntax and options can be found [here][7].
And you can just override the file by extnding the image with your own as follow:
```
FROM gregoireweber/minecraft-map-builder
COPY config.py /home/minecraft/config.py
```

# See also

Source of used textures for render: [Faithful texture pack][8]
My git repo of [minecraft server in a lightweight docker image][9]

[0]: https://travis-ci.org/weber-gregoire/minecraft-overviewer
[1]: https://hub.docker.com/r/gregoireweber/minecraft-map-builder/
[2]: https://hub.docker.com/r/gregoireweber/minecraft-map-viewer/
[3]: https://overviewer.org/
[4]: https://leafletjs.com/
[5]: https://minecraft.net/
[6]: https://crontab-generator.org/
[7]: http://docs.overviewer.org/en/latest/config/
[8]: https://minecraft.curseforge.com/projects/faithful-32x
[9]: https://github.com/weber-gregoire/docker-minecraft